<!-- 变更日志
v1 2026-02-16: 初稿
-->

# 第九章 模型验证与比较框架

---

## 学习目标

完成本章后，你应能够：

1. 建立 ROM 验证的多维指标体系（精度、实时性、稳健性、可运维性）；
2. 设计覆盖常态、冰期、突发扰动的测试集与在环流程；
3. 对 Transfer Function、IDZ、Muskingum、数据驱动模型进行统一比较；
4. 理解统计显著性与工程显著性的区别；
5. 输出可用于上线决策的模型评估报告模板。

## 9.1 章间衔接

前八章分别介绍了多类降阶模型及冰期策略。本章回答“如何公平比较并决定上线版本”。核心不是寻找绝对最优模型，而是在 ODD 与 Safety Envelope 约束下找到“可长期运行”的最优折中。

## 9.2 评估维度与指标体系

建议采用四维评价：

1. **精度维**：MAE、RMSE、峰值误差、到时误差；
2. **实时维**：单步推理耗时、滚动优化总时长；
3. **稳健维**：跨工况误差漂移、异常工况违例率；
4. **运维维**：参数更新频率、回退成功率、可解释性评分。

[表9-1: ROM 统一评估指标定义]
{描述: 指标名称、数学定义、工程阈值建议、评价频次。}
{尺寸: 半页}
{颜色方案: 灰度}

## 9.3 测试集设计与在环验证

测试集应包含：

- 常态工况（稳态与缓变需求）；
- 扰动工况（闸门突变、边界波动）；
- 冰期/检修工况（参数时变显著）；
- 传感器异常工况（噪声、偏置、掉线）。

在环验证建议流程：MIL → SIL → HIL，且每级均设置“通过/回退/修订”门槛。

[图9-1: ROM 比较评估与在环门禁流程]
{描述: 从数据分层、模型候选、离线评估到MIL/SIL/HIL与上线决策的流程图。}
{尺寸: 全页}
{颜色方案: 蓝色系}

## 9.4 比较方法：加权评分与约束优先

推荐“约束优先 + 加权评分”两阶段：

1. 先筛除违反硬约束（如安全门限、实时性门限）的模型；
2. 对剩余模型计算综合分：

$$
Score=w_1S_{acc}+w_2S_{rt}+w_3S_{rob}+w_4S_{ops}
$$

其中 $\sum w_i=1$，可按项目阶段动态调整（试运行重稳健，正式运行重运维）。

[工程解释] 避免“单一误差最优即上线”的常见陷阱。

## 9.5 可复现实例：四类 ROM 比较

【例9-1】某渠段四类候选模型在同一测试集表现如下（归一化后越大越好）：

- Transfer Function：$S_{acc}=0.78, S_{rt}=0.95, S_{rob}=0.72, S_{ops}=0.90$
- IDZ：$0.82, 0.93, 0.80, 0.88$
- Muskingum：$0.74, 0.97, 0.76, 0.92$
- 机理+数据残差：$0.90, 0.85, 0.84, 0.70$

设权重 $w=[0.35,0.20,0.30,0.15]$。

**求解**：计算综合分并给出推荐。

**解题过程**：

- Transfer Function：$0.35\times0.78+0.20\times0.95+0.30\times0.72+0.15\times0.90=0.814$
- IDZ：$0.35\times0.82+0.20\times0.93+0.30\times0.80+0.15\times0.88=0.845$
- Muskingum：$0.35\times0.74+0.20\times0.97+0.30\times0.76+0.15\times0.92=0.819$
- 机理+数据残差：$0.35\times0.90+0.20\times0.85+0.30\times0.84+0.15\times0.70=0.842$

**结果讨论**：

IDZ 得分最高（0.845），机理+数据残差次之（0.842）。若项目当前阶段更强调可解释与运维可控，优先 IDZ；若强调精度提升，可选机理+数据并配严格回退。

[图9-2: 四类模型雷达图与综合分柱状图]
{描述: 左侧雷达图展示四维评分，右侧柱状图展示总分排序。}
{尺寸: 半页}
{颜色方案: 蓝色系}

## 9.6 评估报告模板与决策建议

建议上线评估报告至少包含：

1. 评估范围与 ODD 定义；
2. 数据分层与覆盖度说明；
3. 核心指标结果与显著性分析；
4. 失效案例与回退演练结果；
5. 最终推荐与后续监测计划。

## 9.7 本章小结

本章构建了 ROM 验证与比较的统一框架：通过“硬约束筛选 + 多维加权评分 + 在环门禁”，把模型选择从单一精度比较升级为工程可运营决策。下一章将进入胶东调水降阶建模实践，给出完整项目级交付样例。

## 习题

### 基础题

1. 为什么 ROM 比较必须同时考虑精度、实时性、稳健性、运维性？  
2. 统计显著性与工程显著性有什么差异？  
3. 硬约束筛选应先于加权评分的原因是什么？

### 应用题

4. 给定三模型评分与权重，完成综合分计算并给出上线建议。  
5. 设计一个面向冰期的模型对比测试集，需包含至少4类场景与对应指标。

### 思考题

6. 若团队在“高精度低可解释”与“中精度高可维护”之间分歧较大，你将如何组织决策流程？

## 拓展阅读

1. Ljung, L. (1999). *System Identification*.  
2. Montgomery, D. (2017). *Design and Analysis of Experiments*.  
3. Litrico, X. & Fromion, V. (2009). *Modeling and Control of Hydrosystems*.  
4. ASCE (2014). *MOP 131: Canal Automation for Irrigation Systems*.  
5. Lei et al. (2025d). 水资源系统分析学科展望。
