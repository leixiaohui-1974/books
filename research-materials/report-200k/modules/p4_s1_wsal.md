## 4.1 从"辅助决策"到"自主运行"的演进路径

当前，全球水系统的运行管理仍然高度依赖人类调度员的经验判断和手动操作。即使是最先进的智慧水利系统，其角色也主要是"辅助决策"——为调度员提供数据、预报和方案建议，最终的决策和执行仍由人类完成。然而，随着感知技术、模型能力和AI技术的快速发展，水系统运行正在从"辅助决策"向"自主运行"演进。

这一演进并非水利领域独有的现象，而是跨领域的共同趋势。回顾其他工程领域的自主运行发展历程，可以为水系统提供有益的参照和启示。

### 4.1.1 跨领域的自主运行演进

**航空领域**。航空是人类最早实现高度自主运行的工程领域之一。1914年，劳伦斯·斯佩里（Lawrence Sperry）首次演示了飞机自动驾驶仪，实现了飞行姿态的自动保持。1947年，美国空军的C-54飞机完成了首次全自动跨大西洋飞行，包括起飞、巡航和着陆全过程。1965年，自动着陆系统（Autoland）开始在商业航空中应用，大幅提升了低能见度条件下的飞行安全。此后，飞行管理系统（FMS）、自动飞行控制系统（AFCS）持续发展，现代商用飞机在巡航阶段已实现高度自主运行。航空领域的经验表明：自主运行的核心不是取消人类，而是让人类从繁重的操纵任务中解放出来，专注于异常处置和战略决策。

**汽车领域**。SAE International制定的自动驾驶分级标准J3016是自主运行分级领域最具影响力的标准框架。该标准将自动驾驶分为L0（无自动化）到L5（完全自动化）六个等级，每个等级对应明确的人机职责划分。J3016的核心贡献在于引入了两个关键概念：运行设计域（Operational Design Domain, ODD）——定义自动驾驶系统可以正常工作的环境条件边界；以及动态驾驶任务（Dynamic Driving Task, DDT）——定义需要自动化的具体任务内容。这两个概念为自主运行的分级提供了严格的逻辑基础。如今，Waymo、百度Apollo等公司的自动驾驶出租车已在部分城市开展商业运营，处于L4水平的有限场景应用。

**电网领域**。20世纪50年代，自动发电控制（AGC）系统开始在电网中应用，实现了发电功率的自动调节。60年代，SCADA系统得到推广。80年代，能量管理系统（EMS）实现了电网的集中优化调度。2011年以来，随着新能源大规模接入，电网面临越来越大的不确定性，自主运行的需求日益迫切。智能电网的发展正在推动电力调度从集中式优化向分布式自主协调的方向演进——这与水网面临的挑战高度相似。

**工业过程控制领域**。1975年，分布式控制系统（DCS）的出现标志着工业过程控制进入分布式时代。2022年，日本横河电机公司实现了化工厂的AI自主运行35天的里程碑——在此期间，整个化工生产过程由人工智能系统全自主管理，人类操作员仅在监督岗位待命。这一事件被视为工业过程控制领域向自主运行迈进的标志性事件。

**船舶领域**。1957年，美国海军研发了第一艘自主水下航行器（AUV）。挪威Yara公司的Yara Birkeland号成为世界首艘全电动自主集装箱船。近年来，国际海事组织（IMO）正在制定海上自主水面船舶（MASS）的国际规则框架——包括自主运行分级、安全标准和法律责任等。

### 4.1.2 共同规律与水网的特殊性

上述领域的发展历程揭示了两条共同规律：

**规律一：渐进演进**。自主运行的实现是一个渐进的过程，从完全人工操作，到辅助决策，到部分自动化，到高度自动化，最终到完全自主运行。每个领域都经历了数十年的发展才达到当前水平。跳跃式发展不仅技术上难以实现，安全上更不可接受。

**规律二：分级框架是发展的基础设施**。每个成功推进自主运行的领域，都建立了明确的分级框架——航空的CAT等级、汽车的SAE L0-L5、电网的成熟度模型。分级框架为技术发展提供了清晰的目标牵引，为安全监管提供了评估依据，为社会接受度的培养提供了渐进路径。

然而，水网作为自主运行的应用场景，具有不同于上述领域的特殊性：

| 比较维度 | 自动驾驶汽车 | 自主运行水网 |
| :--- | :--- | :--- |
| 系统规模 | 单车（局部系统） | 跨越数百至上千千米的网络系统 |
| 时间常数 | 毫秒-秒级响应 | 分钟-小时级（长距离调水延迟可达数天） |
| 失效后果 | 车祸（局部性） | 洪水/断水（区域性、社会性） |
| 环境不确定性 | 交通流、天气、行人 | 来水不确定性、需求变化、设施老化、冰期 |
| 传感覆盖度 | 高密度多模态传感 | 稀疏传感，大量区域不可观 |
| 执行器响应 | 毫秒级（电机驱动） | 分钟级（水力闸门）到小时级（水库蓄放） |
| 社会感知度 | 公众高度关注 | 相对"隐形"但后果可能更严重 |

这些特殊性决定了水网的自主运行分级不能简单照搬SAE J3016，需要根据水利系统的固有特征进行针对性设计。

值得强调的是：**水网是最后一个没有建立L0-L5自主运行分级体系的重大工程领域**。航空有飞行自动化等级，汽车有SAE J3016，电网有智能电网成熟度模型，船舶有IMO的MASS分级，但水网至今没有一个类似的分级框架来描述和评估其自主运行水平。这一空白，正是WSAL概念提出的背景和动因。

## 4.2 WSAL：水网自主等级分级体系

### 4.2.1 WSAL的基本定义

WSAL（Water Systems Autonomy Levels，水网自主等级）是雷晓辉教授在水系统控制论（CHS）框架下提出的分级体系，用于描述和评估水系统自主运行的程度。WSAL借鉴了SAE J3016自动驾驶分级的思想，同时针对水利系统的特殊性进行了适配设计，将水系统的自主运行水平分为L0到L5六个等级。

在定义WSAL之前，需要先明确两个基础概念：

**运行设计域（Operational Design Domain, ODD）**。ODD定义了自主运行系统可以正常工作的环境条件集合。对于水系统而言，ODD包括：来水条件范围（枯水/平水/丰水/洪水/冰期）、用水需求范围、水质条件范围、设备可用性条件、通信条件等。ODD的边界定义了系统"可以自主运行"和"需要人工接管"的临界条件。

**最小风险状态（Minimum Risk Condition, MRC）**。MRC是当系统运行条件超出ODD边界或发生严重故障时，系统应达到的安全状态。对于水系统而言，MRC可能包括：所有闸门保持当前开度不变（静止模式）、所有闸门全开或全关至安全位置、泵站紧急停机等。MRC的设计原则是：在任何情况下，系统都能够安全地退出自主运行模式，不会导致灾难性后果。

### 4.2.2 WSAL六级定义

| 等级 | 名称 | 人机角色分工 | ODD范围 | 核心技术要求 |
| :--- | :--- | :--- | :--- | :--- |
| L0 | 人工运行 | 人类完成全部感知、决策和执行 | 不适用 | 水尺、电话、纸质调度规程 |
| L1 | 辅助监控 | 系统提供监测数据和报警，人类完成决策和执行 | 不适用 | SCADA系统、远程监控 |
| L2 | 辅助决策 | 系统提供决策建议（预报+方案），人类确认后执行 | 不适用 | 水动力模型、优化算法、数字孪生 |
| L3 | 条件自主 | 在ODD范围内系统自主决策和执行，人类监督并随时接管 | 受限ODD | MPC/DMPC、安全包络、接管机制 |
| L4 | 高度自主 | 在扩展ODD范围内系统自主运行，异常时自动执行MRC | 扩展ODD | 自适应控制、在线学习、MRC自动执行 |
| L5 | 完全自主 | 系统在全工况域内自主运行，人类仅做战略监督 | 全工况域 | 通用水利智能体、自演化系统 |

**L0：人工运行**。系统没有任何自动化辅助。调度员依靠现场巡视或电话汇报获取水情信息，根据经验和规程做出调度决策，通过人工操作闸门、泵站等设备执行决策。中国目前仍有大量小型水利工程处于这一水平。

**L1：辅助监控**。系统通过SCADA等技术实现了远程数据采集和设备远程控制，但决策完全由人类完成。SCADA系统的角色是"帮人看得更远、手伸得更长"，不参与决策过程。中国大中型水利工程普遍达到了L1水平。

**L2：辅助决策**。系统不仅提供监测数据，还运行数学模型和优化算法，为调度员提供预报信息和调度方案建议。但最终的决策权仍在人类——调度员可以采纳系统建议，也可以根据自身判断进行修改。当前中国最先进的智慧水利系统大致处于L2水平。"四预"功能本质上就是L2级能力的水利化表达。

**L3：条件自主**。这是一个质变性的等级——系统在定义明确的ODD范围内，可以自主完成"感知→决策→执行→反馈"的完整闭环，不需要人类实时干预。但有两个重要的限制条件：一是ODD范围是受限的（例如仅限常规工况，不包括极端洪水、冰期等），二是人类调度员必须在"回路上"（on-the-loop）监督系统运行，随时准备接管。L3的核心技术要求包括：基于MPC/DMPC的实时优化控制、安全包络（Safety Envelope）机制（确保系统状态始终在安全范围内）、以及规范化的人工接管流程。L3是当前技术条件下最现实的近期目标。

**L4：高度自主**。系统在比L3更广泛的ODD范围内实现自主运行。与L3的关键区别在于：当运行条件超出ODD边界时，L4系统能够自动识别这一情况并自主执行最小风险状态（MRC），而不需要人类接管。这意味着L4系统在异常情况下也能保证安全——即使通信中断、人类无法及时干预，系统也能自主退到安全状态。L4的核心技术要求包括：自适应控制（能够在模型参数变化时自动校正）、在线学习（从运行经验中持续优化策略）、ODD边界的实时监测和判断、以及MRC的自动执行和验证。

**L5：完全自主**。系统在全工况域内实现自主运行，不需要定义ODD边界——因为系统能够处理所有可能遇到的工况。人类的角色完全退到"战略监督"层面，不参与日常运行决策。L5是一个理想化的长远目标，在可预见的未来（10-20年内）难以实现。它可能需要通用人工智能（AGI）水平的技术突破，以及对水利系统物理过程的近乎完美的理解和建模能力。

### 4.2.3 ODD的结构化定义

WSAL的核心技术概念之一是ODD的结构化定义。在SAE J3016中，ODD被定义为自动驾驶系统设计适用的具体运行条件（包括但不限于地理区域、道路类型、速度范围、天气条件等）。在WSAL框架中，水系统的ODD需要从以下维度进行结构化定义：

| ODD维度 | 具体要素 | 示例条件范围 |
| :--- | :--- | :--- |
| 水文条件 | 来水流量/水位范围 | Q ∈ [Q_min, Q_max], H ∈ [H_min, H_max] |
| 气象条件 | 气温、降雨、冰冻 | T > 0°C（非冰期），P < P_alarm（非暴雨） |
| 需求条件 | 用水需求变化范围 | D ∈ [D_min, D_max]，变化率 ≤ ΔD_max |
| 设备条件 | 闸门/泵站可用性 | 可用率 ≥ 95%，备用设备可切换 |
| 通信条件 | 传感器和通信链路状态 | 丢包率 < 5%，延迟 < T_comm_max |
| 水质条件 | 水质参数范围 | 无突发污染事件 |

ODD的数学表达可以形式化为这些维度的笛卡尔积的一个子集：

$$ODD = \{(q, t, d, e, c, w) \mid q \in \mathcal{Q}, t \in \mathcal{T}, d \in \mathcal{D}, e \in \mathcal{E}, c \in \mathcal{C}, w \in \mathcal{W}\}$$

其中每个维度集合都有明确的上下界。当系统的实际运行条件落在ODD内时，自主运行系统负责决策和执行；当运行条件超出ODD边界时，系统必须触发退出机制（L3：请求人工接管；L4：自动执行MRC）。

ODD的定义不是一次性的，而是随着技术进步和运行经验积累而逐步扩展的。从L3到L4到L5的升级过程，本质上就是ODD范围不断扩展的过程——从受限ODD到扩展ODD再到全工况域。

### 4.2.4 安全包络与最小风险状态

安全包络（Safety Envelope）是WSAL L3及以上等级的核心安全机制。安全包络定义了系统状态变量的安全边界，确保在自主运行过程中系统状态始终保持在安全范围内：

$$\mathcal{X}_{safe} = \{x \mid h_i(x) \leq 0, \, i = 1, \ldots, m\}$$

其中 $h_i(x)$ 是安全约束函数。例如，对于一个调水渠道，安全包络可能包括：各节点水位不超过渠堤高程的安全余量、各节点水位不低于最小工作水深、闸门开度在物理限幅范围内、闸门开度变化速率不超过机械限制等。

安全包络与MPC优化目标之间的关系是：安全包络是硬约束，MPC优化目标是软目标。当两者发生冲突时，安全包络优先——即使牺牲供水效率或偏离目标水位，也必须保证系统状态不突破安全边界。这一"安全优先"的设计原则，与航空领域的"安全第一"理念和汽车领域的功能安全标准（ISO 26262的ASIL等级）一脉相承。

最小风险状态（MRC）的设计原则遵循"失效安全"（Fail-Safe）理念。对于不同类型的水利工程，MRC的具体定义有所不同：对于调水渠道，MRC通常是"闸门保持当前开度，泵站维持当前工况"（静止模式），避免任何可能恶化局势的操作；对于防洪系统，MRC可能是"闸门全开，最大化泄洪能力"；对于供水系统，MRC可能是"维持最低保障供水量"。MRC的执行必须是自动化的、不依赖通信的——因为触发MRC的场景往往伴随着通信故障或其他异常。

### 4.2.5 WSAL的工程映射

将WSAL框架映射到中国现有水利工程的实际状况，可以形成以下评估：

| 工程类型 | 当前主流水平 | 近期目标（5年） | 中期目标（10年） |
| :--- | :--- | :--- | :--- |
| 大型水库（三峡、丹江口等） | L1-L2 | L2-L3 | L3-L4 |
| 南水北调中线 | L1-L2 | L3（常规工况） | L3-L4 |
| 胶东调水 | L2（部分渠段L3试点） | L3 | L4 |
| 大中型灌区 | L0-L1 | L1-L2 | L2-L3 |
| 城市供水管网 | L1-L2 | L2-L3 | L3 |
| 小型农村水利 | L0 | L0-L1 | L1 |

这一映射揭示了几个重要事实：第一，中国水利工程的自主运行水平整体处于L0-L2阶段，距离L3（条件自主）还有明确的技术和标准差距；第二，不同类型工程的发展节奏差异显著——大型工程有望在5-10年内达到L3-L4，而小型工程的智能化仍是长期任务；第三，胶东调水工程在L3试点方面走在前列，有望成为中国首个达到WSAL L3水平的大型调水工程。

### 4.2.6 WSAL与xIL验证的对应关系

WSAL的每一级跃迁都需要通过严格的验证才能被认定。CHS框架提出的xIL（X-in-the-Loop）验证体系，为WSAL等级认定提供了方法论支撑：

| WSAL等级 | 必须通过的验证阶段 | 验证要求 |
| :--- | :--- | :--- |
| L1→L2 | MIL（模型在回路） | 模型精度验证：预报和优化结果与实测数据的偏差在可接受范围内 |
| L2→L3 | MIL + SIL（软件在回路） | 控制软件在仿真环境中的功能验证和安全约束满足验证 |
| L3→L4 | MIL + SIL + HIL（硬件在回路） | 控制系统在含真实硬件的半实物仿真环境中的性能和安全验证 |
| L4→L5 | MIL + SIL + HIL + PIL（现场在回路） | 控制系统在实际工程现场的影子运行和渐进授权验证 |

这一渐进式验证流程借鉴了航空领域的适航认证和汽车领域的功能安全认证理念，确保每一级自主运行水平的提升都经过了充分的安全验证。关于xIL验证体系的详细介绍，将在§4.5中展开。
