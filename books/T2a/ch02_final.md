<!-- 变更日志
v2 2026-02-16: 根据四角色评审修订——新增控制结构选型检查清单，强化ODD与Safety Envelope关系，补充前馈失效降级策略
v1 2026-02-16: 初稿
-->

# 第二章 控制论视角下的水系统

---

## 学习目标

完成本章后，你应能够：

1. 从控制论角度解释水系统“慢变量+时滞+约束耦合”的对象特性；
2. 建立水系统的输入、状态、输出与扰动变量集合；
3. 区分反馈、前馈与多变量协调控制在水网中的适用场景；
4. 理解钱学森《工程控制论》与现代水系统控制的继承关系；
5. 为后续 Saint-Venant 建模与控制器设计给出问题定义模板。

> **引导案例：同一场暴雨下，两座泵站为何表现完全不同？**
>
> 某城市排涝联排区域在同一次强降雨中，A泵站出现频繁启停与液位振荡，B泵站保持平稳。复盘后发现：A站采用单点液位反馈并忽略上游来水预报，且启停逻辑未考虑执行器最小停机时间；B站采用“雨量前馈+液位反馈+泵组协调”策略，并设置了安全包络与反抖动机制。该案例表明，水系统控制问题不是单一 PID 参数整定，而是“对象认知+结构化控制+约束治理”的组合。

> **前章回顾**：上一章介绍了本领域的核心概念与方法。本章在此基础上进一步展开。


## 水系统为何是典型的复杂被控对象

与高速机电系统相比，水系统具有三类鲜明特性：

1. **时空分布与传播时滞并存**：上游操作到下游响应常具有分钟到小时级滞后；
2. **硬约束主导运行**：水位、流量、库容、闸门开度、爬坡率约束共同决定可行域；
3. **强耦合与多目标冲突**：防洪、供水、发电、生态等目标长期并存。

因此，水系统控制需要同时处理“动态可预测性”与“运行可治理性”。

## 控制对象形式化：输入—状态—输出—扰动

为支持后续建模与控制算法，本章给出统一形式：

\[
\dot{\mathbf{x}}(t)=f\big(\mathbf{x}(t),\mathbf{u}(t),\mathbf{d}(t)\big),\quad
\mathbf{y}(t)=h\big(\mathbf{x}(t),\mathbf{u}(t)\big)
\]

其中：

- \(\mathbf{x}\)：状态（渠段水位、断面流量、库水位、管网压力等）；
- \(\mathbf{u}\)：控制输入（闸门开度、泵速、机组负荷分配等）；
- \(\mathbf{d}\)：扰动（来水、降雨、用水需求波动、设备效率变化）；
- \(\mathbf{y}\)：可测输出（传感器采样量与估计量）。

约束集合延续第一章统一定义：

\[
\mathbf{x}\in\mathcal{X}_{safe}\subseteq\mathcal{X}_{ODD},\quad
\mathbf{u}\in\mathcal{U},\quad \Delta\mathbf{u}\in\Delta\mathcal{U}
\]

[表2-1: 水系统控制变量字典（教学版）]
| 类别 | 典型变量 | 工程含义 | 常见约束 |
|---|---|---|---|
| 状态 \(\mathbf{x}\) | 水位、流量、库容 | 系统内部能量/质量分布 | 上下限、安全带 |
| 输入 \(\mathbf{u}\) | 闸门、泵、阀门指令 | 人工/自动可操纵量 | 幅值与变化率 |
| 扰动 \(\mathbf{d}\) | 来水、降雨、负荷 | 外生不确定因素 | 预测误差边界 |
| 输出 \(\mathbf{y}\) | 测点流量/压力/液位 | 监测与评价依据 | 采样频率与噪声 |

## 反馈、前馈与多变量协调

### 2.3.1 反馈控制：稳态与鲁棒性的基本保障

反馈控制通过实时测量偏差纠正控制输入，是工程最基础且最可靠的结构。其优势是对建模误差具有一定容忍度；不足是对长时滞对象易出现超调与振荡。

### 2.3.2 前馈控制：面向可预见扰动的主动补偿

当降雨预报、上游来水预报可获得时，可引入前馈通道提前调节库容或泵组工况，降低反馈通道压力。前馈效果高度依赖预测质量，必须与反馈联合设计。

### 2.3.3 多变量协调：从“单设备最优”到“系统最优”

水网通常存在输入与输出之间的多对多映射，局部最优可能引发全局代价上升。因此需要在统一约束下进行协同分配，例如“多泵站能耗—液位风险”的联合优化。

[图2-1: 反馈-前馈-多变量协调控制结构示意]
{描述: 左侧为扰动与设定值输入，中部为对象与状态估计，右侧为输出与约束监视；图中标注反馈环、前馈通道与协调层。}
{尺寸: 全页}
{颜色方案: 蓝色系}
{对应ARCH编号: 无（本章自定义教学图）}

## 《工程控制论》传承与CHS扩展

钱学森《工程控制论》强调“从工程对象出发建立可计算模型，再回到工程验证”，这一方法论与 CHS 的主线高度一致。CHS 在此基础上的扩展体现在：

1. 从单装置扩展到跨流域水网；
2. 从稳定性分析扩展到“性能+安全+治理”三维目标；
3. 从离线设计扩展到“在环验证+运行审计+持续演进”。

## 例题：排涝泵站的控制结构选型

【例2-1】某联排泵站群需满足“内涝风险最低、启停次数受控、总能耗不过高”。请为该场景选择控制结构并说明原因。

**已知**：

- 共有 4 座泵站，上游来水受降雨影响显著；
- 每座泵站有最小启停间隔约束；
- 调度中心可获取未来 2 小时降雨预报。

**解题思路**：

1. 以液位偏差构建本地反馈回路，保证每站稳态运行；
2. 以降雨预报构建区域前馈补偿，提前释放可用库容；
3. 在上层设置协调分配器，处理泵站间负荷与能耗权衡；
4. 对启停间隔、液位边界设置硬约束，超限触发降级策略。

**结论**：

该场景应采用“反馈+前馈+协调层”的三层结构，而非单一回路。该结构直接对应后续章节的分层分布式控制框架。

### 控制结构选型检查清单（教学/工程共用）

- [ ] 是否存在可利用的扰动预测信息（可支撑前馈）；
- [ ] 是否已定义 \(\mathcal{X}_{safe}\) 与 \(\mathcal{X}_{ODD}\) 并可在线判定；
- [ ] 是否识别关键耦合通道并配置协调层；
- [ ] 是否为执行器设置最小启停间隔与速率限制；
- [ ] 是否定义前馈失效时的降级策略（切换至保守反馈并收缩可运行域）。

## 本章小结

本章从控制论角度澄清了水系统作为被控对象的本质：慢时标、强约束、多目标与强耦合并存。基于统一变量字典与控制结构框架，可将“经验调度问题”转化为“可计算控制问题”。下一章将进入明渠动力学与线性化基础，为控制器设计提供模型起点。

## 习题

### 基础题

**2-1.** 说明水系统与典型机电系统在时滞与约束方面的主要差异。
**2-2.** 给出一个你熟悉场景的 \(\mathbf{x},\mathbf{u},\mathbf{d},\mathbf{y}\) 定义。
**2-3.** 比较反馈与前馈在模型依赖性方面的差异。

### 应用题

**2-4.** 针对“双水库—单供水干线”系统，设计一个包含反馈与前馈的控制结构草图，并列出关键约束。
**2-5.** 若某泵站液位传感器存在偏移误差，分析单纯反馈控制可能造成的风险，并提出补救措施。

### 思考题

**2-6.** 在“预测不准但接管代价高”的场景下，你会如何设定前馈权重与人工接管阈值？请给出原则性方案。

## 拓展阅读

1. 钱学森. 《工程控制论》.
2. Litrico, X., & Fromion, V. *Modeling and Control of Hydrosystems*.
3. Schwanenberg, D. et al. (2015). Real-time control in river systems.
4. Lei et al. (forthcoming). CHS framework and engineering cybernetics in hydro systems.
