---
name: wechat-article
description: "专业公众号文章写作技能。用于创建适合微信公众号发布的高质量原创文章，覆盖选题策划、内容写作、数据核查、错别字检查、手机排版优化的全流程。触发条件：用户提到'公众号文章'、'微信文章'、'推文'、'自媒体文章'，或要求写面向大众传播的科普/行业分析/观点类长文。本技能专门针对水利水电、智慧水利、水系统控制论(CHS)、HydroOS等领域的专业科普写作进行了优化。"
---

# 微信公众号文章写作技能

## 概述

本技能用于创建达到发布标准的微信公众号文章。核心原则：**手机优先、内容准确、节奏流畅、零容错**。

公众号文章不是学术论文，也不是内部报告。它的读者在手机上用碎片时间阅读，拇指一划就是下一篇。写作必须尊重这个现实。

---

## 第一部分：写作流程

### 1.1 标准流程（必须按顺序执行）

```
选题确认 → 结构设计 → 初稿写作 → 五轮审查 → 排版优化 → 输出交付
```

每个阶段都有明确的检查点，不得跳过。

### 1.2 选题确认

与用户确认以下要素（使用 ask_user_input 工具）：

| 要素 | 说明 |
|------|------|
| 核心主题 | 文章要讲什么 |
| 目标读者 | 行业专家 / 政府决策者 / 工程技术人员 / 泛科普读者 |
| 文章调性 | 严肃权威 / 深度分析 / 通俗科普 / 观点输出 |
| 篇幅要求 | 短文(1500-2500字) / 中文(2500-4000字) / 长文(4000-6000字) |
| 是否为系列 | 独立文章 / 姊妹篇(需确认关联篇目) |
| 数据引用 | 是否需要引用具体数据(如有,必须注明来源) |

### 1.3 结构设计

公众号文章的结构必须遵循"三秒法则"——读者在三秒内决定是否继续读。

**标准结构模板：**

```
标题（15字以内为佳，最多不超过22字）
├── 引子（1-3段，150字以内）—— 钩子，制造好奇心或紧迫感
├── 第一节 —— 现状/问题/背景
├── 第二节 —— 核心观点/分析
├── 第三~五节 —— 展开论述
├── 倒数第二节 —— 展望/路径
└── 最后一节 —— 收束（不写"总结"，要有回味感）
```

**结构设计规则：**
- 全文分6-9个节（含引子和收尾），每节800-1200字
- 每节必须有一级标题（## 格式），标题要有信息量，不要用"引言""结论"这种空标题
- 节与节之间要有过渡，不是孤立板块
- 禁止出现三级及以下标题（手机上层级太深读者会迷路）

---

## 第二部分：写作规范

### 2.1 手机阅读铁律

**这是最重要的部分。以下每一条都是硬性要求：**

#### 段落长度
- **每段不超过150字（约3-4行手机屏幕）**
- 超过150字的段落必须拆分
- 连续两段都接近150字时，中间插入一段短句（50字以内）调节节奏
- 绝对禁止出现超过200字的段落——这在手机上形成"文字墙"，读者直接划走

#### 句子长度
- 单句不超过50字
- 复合句不超过70字
- 超过70字的句子必须拆成两句
- 句式要有变化：长短交替、陈述和反问交替

#### 留白与节奏
- 每3-4段插入一个**加粗的点睛句**（独立成段）
- 节与节之间用 `---` 分隔线
- 重要数据或对比用加粗强调，但每节加粗不超过3处
- 禁止整段加粗（视觉噪音）
- 禁止连续两个加粗段落

#### 列表使用
- 正文中不使用bullet列表（公众号排版后容易错位）
- 需要列举时用自然语言：如"包括三个方面：第一...第二...第三..."
- 或者用顿号连排：如"涵盖建模、控制、安全、验证四个维度"
- 唯一例外：对比性数据可以用竖排格式，如：
  ```
  **IDC口径：** 102亿元，占比0.8%
  **智研口径：** 216亿元，占比1.6%
  **全口径：** 414亿元，占比3.1%
  ```

### 2.2 语言风格

#### 基本原则
- **说人话**：把专业概念翻译成读者能理解的语言
- **有态度**：不做面面俱到的教科书，要有明确的判断和立场
- **有节制**：一篇文章只讲一个核心观点，其余都是为这个观点服务

#### 开头策略（前3段决定生死）
- 第一段必须有"钩子"——一个数字、一个反常识判断、一个问题、一个画面
- 禁止用"随着...的发展""近年来..."这类空泛开头
- 禁止用"众所周知""不言而喻"这类假设读者已知的短语
- 前3段之内必须让读者知道"这篇文章要告诉我什么"

#### 结尾策略
- 不写"综上所述""总而言之"
- 不做简单重复
- 好的结尾方式：提出一个新的问题、回扣开头的钩子、一句有力的判断
- 文章末尾不写作者署名行（这是用户的明确要求）

#### 用词规范
- 禁止用"赋能""抓手""闭环""打法""颗粒度""对齐"等互联网黑话（除非是在批评这些词）
- 禁止用"笔者认为""本文将论述"等学术腔
- 慎用"其""该""上述"等书面代词，手机阅读中指代容易模糊
- 专业术语首次出现时必须解释（用破折号或括号）
- 英文缩写首次出现时必须给出中文全称

#### 类比与例子
- 每个抽象概念都要配一个具象类比或例子
- 类比优先选择读者日常经验：如用"高速公路""电网""快递物流"来类比水网
- 类比要准确，不能为了通俗而牺牲精确

### 2.3 数据使用规范

数据是公众号文章公信力的基石，但也是最容易出错的地方。

#### 必须遵守的规则
- **所有数据必须注明来源**（在文中自然带出，不用脚注）
- 数据来源的表述方式："据IDC报告""水利部公报显示""根据国家统计局数据"
- **数据必须可验证**：引用的报告、公报、统计年鉴必须真实存在
- **禁止编造数据**：如果不确定某个数字，宁可用定性描述（"显著增长""接近翻番"）
- **百分比必须反算验证**：如果说"占比8%"，必须用分子÷分母验证确实约等于8%

#### 数据对比规则
- 对比数据必须口径一致（不能用IDC口径的A和智研口径的B做比较）
- 同比数据必须注明年份
- 如果不同来源数据有冲突，必须说明差异原因，不能选择性引用

#### 数据呈现
- 大数字用万/亿为单位，不写"1352900000000元"
- 精度适当：投资金额精确到亿/十亿，百分比精确到小数点后一位
- 数据对比时给出直观感受："相当于X个Y""是Z的N倍"

---

## 第三部分：五轮审查（逐轮执行，不可跳过）

初稿写完后，必须依次执行以下五轮审查。每轮审查发现的问题必须全部修正后才能进入下一轮。

### 第一轮：事实与数据审查

**审查要点：**
- 所有数据是否有明确来源？来源是否真实存在？
- 百分比是否经过反算验证？（用代码计算 `分子/分母` 确认）
- 年份/日期是否正确？
- 人物姓名、职务、机构名称是否准确？
- 引用的政策文件名称和编号是否正确？
- 因果关系是否成立？（A导致B，是否确实有因果链？）
- 时间线是否正确？（不能说"2020年以前就已经有了2023年的技术"）

**执行方式：**
```python
# 提取文中所有数据点，逐一验证
# 示例：
# 原文："水利建设投资13529亿元"
# 验证：2024年全国水利建设投资13529亿元 ← 来源：水利部2025年工作会议
# 结果：✓ 正确
```

### 第二轮：文字与语法审查

**审查要点：**
- 错别字（重点关注同音字混淆：的/地/得、以/已、在/再）
- 标点符号（中文标点与英文标点不混用；破折号用——不用--）
- 主语缺失或主语不一致
- 搭配不当（如"提高水平"不能写成"增加水平"）
- 重复用词（同一段中不要连续出现三次以上相同的词）
- 量词搭配（"一个系统"还是"一套系统"）
- "的地得"用法
- 数字与汉字的一致性（正文中一到十用汉字，数据用阿拉伯数字）

**高频易错字清单（必查）：**
```
账/帐    像/象    座/坐    做/作    
即/既    以/已    在/再    带/代
制/治    致/至    辨/辩    权/劝
渠/渠    坝/坝    堰/堰    闸/闸（水利专业字形确认）
```

### 第三轮：逻辑与论证审查

**审查要点：**
- 各节之间的逻辑链条是否完整？（A→B→C，B是否确实由A推出？）
- 论据是否支持论点？有没有"论据很好但跟论点无关"的情况？
- 有没有过度概括？（用个别案例推出普遍结论）
- 有没有稻草人论证？（曲解了反对观点再批评）
- 转折是否合理？（如果上一段说"很好"，下一段突然说"但是很差"，中间需要过渡）
- 全文的核心观点是否前后一致？（不能前面说"占比不到1%"后面说"占比8%"）

### 第四轮：排版与可读性审查

**审查要点（用代码自动检查）：**

```bash
# 1. 检查段落长度（超过150字的必须拆分）
awk '{if(length($0)>150) print NR": ["length($0)"字] "$0}' article.md

# 2. 检查句子长度（超过70字的必须拆分）
# 按句号、问号、叹号切分后检查每句长度

# 3. 检查连续短段落（连续3个以上50字以下的段落，节奏过碎）

# 4. 检查加粗分布（每节不超过3处加粗，不连续加粗）

# 5. 检查标题层级（只允许一级和二级标题）

# 6. 检查分隔线位置（节与节之间必须有分隔线）
```

**人工检查项：**
- 在手机上模拟阅读全文（将Markdown渲染后检查视觉效果）
- 是否存在"文字墙"（连续3行以上无间断的密集文字区）
- 引用块（>）是否过长（手机上灰色背景区超过3行就需要拆分）
- 数字和英文是否在中文之间显得突兀（必要时加空格）

### 第五轮：通读与体感审查

**这是最后一轮，也是最重要的一轮。前四轮是"检查"，第五轮是"体感"。**

以目标读者的身份完整通读一遍，关注：
- 开头是否在3秒内抓住注意力？
- 哪里开始走神？（走神处就是需要改进的地方）
- 哪里有"读不下去"的感觉？（通常是段落太长或概念太密）
- 结尾是否有余味？还是突然断了？
- 整体阅读时间是否合理？（2000字约5分钟，4000字约10分钟）
- 读完后能否用一句话概括全文？（如果不能，说明核心观点不够突出）

---

## 第四部分：输出格式

### 4.1 文件输出

公众号文章以 Markdown 格式输出（.md文件），原因：
- 微信编辑器（如135编辑器、秀米）支持Markdown导入
- 便于版本管理和修改追踪
- 适合存储到GitHub长期记忆仓库

### 4.2 Markdown格式规范

```markdown
# 标题（一级标题，全文唯一）

**引子第一段（加粗的核心判断或钩子）**

引子正文...

## 一、第一节标题

正文段落...

**点睛句独立成段。**

正文段落...

---

## 二、第二节标题

正文段落...

---

（以此类推）

## 结尾节标题

收束段落...
```

### 4.3 排版规范细则

| 元素 | 规范 |
|------|------|
| 一级标题 | `# 标题` 全文仅一个 |
| 节标题 | `## 一、标题` 用中文数字编号 |
| 段落间距 | 段落之间空一行 |
| 加粗 | `**文字**` 用于点睛句和关键数据，每节≤3处 |
| 节间分隔 | 用 `---` 分隔 |
| 引用块 | `>` 仅用于更正说明、编者注等元信息 |
| 中英文间距 | 中文和英文/数字之间加一个半角空格 |
| 破折号 | 使用中文破折号 `——`（两个em dash），不用 `--` |

### 4.4 交付流程

1. 将最终稿写入 `/home/claude/article_final.md`
2. 执行自动排版检查脚本（见下方）
3. 修正所有检查项
4. 复制到 `/mnt/user-data/outputs/` 并用 `present_files` 交付
5. 给出简要的文章摘要（3句话以内）

---

## 第五部分：自动检查脚本

初稿和修改稿完成后，必须运行以下检查脚本：

```python
#!/usr/bin/env python3
"""公众号文章质量自动检查脚本"""
import re
import sys

def check_article(filepath):
    with open(filepath, 'r', encoding='utf-8') as f:
        content = f.read()
    
    lines = content.split('\n')
    issues = []
    
    # === 1. 段落长度检查 ===
    para = ''
    para_start = 0
    for i, line in enumerate(lines, 1):
        if line.strip() == '' or line.startswith('#') or line.startswith('---'):
            if para.strip():
                pure = re.sub(r'[*_`#>\-\[\]\(\)!]', '', para).strip()
                if len(pure) > 200:
                    issues.append(f"[严重] 第{para_start}行: 段落过长({len(pure)}字)，手机上将形成文字墙，必须拆分至150字以内")
                elif len(pure) > 150:
                    issues.append(f"[警告] 第{para_start}行: 段落偏长({len(pure)}字)，建议拆分")
            para = ''
            para_start = i + 1
        else:
            if not para:
                para_start = i
            para += line
    
    # === 2. 句子长度检查 ===
    sentences = re.split(r'[。！？]', content)
    for s in sentences:
        clean = re.sub(r'[*_`#>\-\[\]\(\)!\n]', '', s).strip()
        if len(clean) > 70:
            preview = clean[:30] + '...'
            issues.append(f"[警告] 长句({len(clean)}字): '{preview}'，建议拆分")
    
    # === 3. 标题层级检查 ===
    for i, line in enumerate(lines, 1):
        if line.startswith('###'):
            issues.append(f"[严重] 第{i}行: 出现三级标题，公众号文章只允许一级和二级标题")
    
    # === 4. 常见错别字检查 ===
    typo_pairs = [
        ('帐号', '账号'), ('帐户', '账户'),
        ('象是', '像是'), ('好象', '好像'),
        ('在做', '注意检查"在做"是否应为"再做"'),
        ('即使...也', '检查是否应为"即便...也"或"即使...也"'),
        ('权利要求', '注意区分"权利"和"权力"'),
    ]
    for wrong, correct in typo_pairs:
        if wrong in content:
            issues.append(f"[检查] 发现'{wrong}'，请确认是否应为'{correct}'")
    
    # === 5. 中英文间距检查 ===
    # 中文后紧跟英文字母或数字（无空格）
    no_space = re.findall(r'[\u4e00-\u9fff][A-Za-z0-9]|[A-Za-z0-9][\u4e00-\u9fff]', content)
    if no_space:
        issues.append(f"[排版] 发现{len(no_space)}处中英文/数字间缺少空格: {no_space[:5]}")
    
    # === 6. 标点符号检查 ===
    if '--' in content and '——' not in content:
        issues.append("[排版] 使用了英文短横线'--'，应使用中文破折号'——'")
    # 检查英文标点混入中文
    mixed_puncts = re.findall(r'[\u4e00-\u9fff][,;:!?]', content)
    if mixed_puncts:
        issues.append(f"[排版] 发现中文后使用英文标点: {mixed_puncts[:5]}")
    
    # === 7. 加粗密度检查 ===
    sections = re.split(r'^## ', content, flags=re.MULTILINE)
    for idx, sec in enumerate(sections[1:], 1):
        bold_count = len(re.findall(r'\*\*[^*]+\*\*', sec))
        if bold_count > 5:
            issues.append(f"[排版] 第{idx}节加粗{bold_count}处，过多(建议≤3处)")
    
    # === 8. 禁用词检查 ===
    banned_words = ['赋能', '抓手', '颗粒度', '对齐', '打法', '笔者认为', '本文将']
    for word in banned_words:
        if word in content:
            issues.append(f"[风格] 发现禁用词'{word}'，请替换为更自然的表达")
    
    # === 9. 空泛开头检查 ===
    first_para = ''
    for line in lines:
        if line.strip() and not line.startswith('#'):
            first_para = line.strip()
            break
    if first_para:
        bad_starts = ['随着', '近年来', '众所周知', '不言而喻', '当前']
        for bs in bad_starts:
            if first_para.startswith(bs):
                issues.append(f"[风格] 文章以'{bs}'开头，缺乏吸引力，建议用数据/问题/判断开篇")
    
    # === 10. 文末署名检查 ===
    last_lines = [l.strip() for l in lines[-5:] if l.strip()]
    if last_lines:
        for ll in last_lines:
            if re.match(r'^(作者|撰文|文/)[:：]', ll):
                issues.append("[格式] 文末包含作者署名行，请删除（用户要求不写署名）")
    
    # === 输出报告 ===
    if issues:
        print(f"\n{'='*60}")
        print(f" 公众号文章质量检查报告 — 共发现 {len(issues)} 个问题")
        print(f"{'='*60}\n")
        severe = [i for i in issues if '[严重]' in i]
        warning = [i for i in issues if '[警告]' in i]
        style = [i for i in issues if '[风格]' in i or '[排版]' in i or '[格式]' in i]
        check = [i for i in issues if '[检查]' in i]
        
        if severe:
            print("🔴 严重问题（必须修正）:")
            for s in severe:
                print(f"  {s}")
        if warning:
            print("\n🟡 警告（强烈建议修正）:")
            for w in warning:
                print(f"  {w}")
        if style:
            print("\n🔵 风格与排版:")
            for s in style:
                print(f"  {s}")
        if check:
            print("\n⚪ 需人工确认:")
            for c in check:
                print(f"  {c}")
        
        print(f"\n{'='*60}")
        return False
    else:
        print("\n✅ 所有检查项通过！文章可以发布。\n")
        return True

if __name__ == '__main__':
    filepath = sys.argv[1] if len(sys.argv) > 1 else '/home/claude/article_final.md'
    check_article(filepath)
```

将此脚本保存为 `/home/claude/writing-projects/check_article.py`，每次写作完成后执行：
```bash
python3 /home/claude/writing-projects/check_article.py article.md
```

---

## 第六部分：领域知识（水利/CHS/HydroOS）

本技能针对雷晓辉教授的公众号写作进行了领域优化。以下是写作中常用的领域知识框架：

### 6.1 核心概念翻译表

写公众号文章时，需要将专业概念翻译为读者能理解的语言：

| 专业概念 | 公众号表述 | 类比 |
|---------|-----------|------|
| 水系统控制论(CHS) | 一门研究"水网怎么运行"的学问 | 相当于电力系统的自动控制理论 |
| HydroOS | 水网的操作系统 | 相当于手机的Android/iOS |
| 自主运行水网 | 能"自己跑"的水网 | 相当于从人工驾驶到自动驾驶 |
| Saint-Venant方程 | 描述水流运动的基本方程 | 相当于牛顿运动定律之于力学 |
| 传递函数/IDZ模型 | 简化版的水流计算模型 | 相当于用近似公式代替精确计算 |
| SCADA系统 | 水利工程的监控系统 | 相当于工厂的中控室 |
| MPC(模型预测控制) | "看远一步再行动"的控制方法 | 相当于下棋时多看几步 |
| ODD(运行设计域) | 系统能安全工作的条件范围 | 相当于自动驾驶的适用场景 |
| SIL/HIL(在环测试) | 在虚拟/半实物环境中测试系统 | 相当于飞行模拟器训练飞行员 |
| 数字孪生 | 水利工程的虚拟镜像 | 相当于在电脑中复制一个真实世界 |

### 6.2 常用背景数据（定期更新）

- 全国水利建设投资：2024年13529亿元，连续三年破万亿
- 南水北调中线：全长1432公里，60余座渠池
- 国家水网：以南水北调东中线为纵轴，四大江河为横轴
- 智慧水利市场规模（IDC口径）：2024年约102亿元
- 智慧水利市场规模（宽口径）：2023年约200-216亿元

### 6.3 写作中应避免的专业表述

- 避免直接出现数学公式（可用文字描述思想）
- 避免大段引用标准编号
- 避免使用"该""其""上述"等指代不明的代词
- 避免一段话中堆砌超过3个专业术语

---

## 第七部分：特殊场景处理

### 7.1 数据修正重发

当发现已发布文章有数据错误需要修正重发时：
- 文章开头必须加更正说明（用 `>` 引用块）
- 更正说明要坦诚说明错误性质，不要遮遮掩掩
- 更正说明不超过3段（引用块在手机上不宜过长）
- 修正后的数据必须经过双重验证

### 7.2 系列文章

当文章属于系列（如CHS理论系列）时：
- 第一段自然带出系列关系："上一篇文章我们聊了X，今天接着谈Y"
- 不要用"本系列第N篇"这种机械编号
- 每篇文章必须能独立阅读，不依赖于系列其他篇目
- 系列文章之间可以互相引用，但不能互相依赖

### 7.3 长文处理

超过5000字的文章：
- 考虑是否应该拆成上下篇
- 如果坚持单篇，每隔1500字左右需要有一个"呼吸点"——一句独立的转承句或一个有力的判断
- 在节标题中适当使用问句（增加阅读期待感）

---

## 第八部分：禁止事项清单

以下是绝对禁止的写作行为，违反任何一条都需要修正：

1. **禁止编造数据**——不确定的数据不写，或用定性描述代替
2. **禁止超长段落**——超过200字的段落必须拆分
3. **禁止三级标题**——手机阅读层级不宜超过两级
4. **禁止学术腔**——"笔者""本文""综上所述"
5. **禁止互联网黑话**——"赋能""抓手""颗粒度"
6. **禁止空泛开头**——"随着...""近年来..."
7. **禁止文末署名**——用户明确要求不写
8. **禁止整段加粗**——只加粗关键短语
9. **禁止bullet列表**——用自然语言列举
10. **禁止跳过审查**——五轮审查必须逐轮执行

---

## 附录：快速检查清单

写作完成后，在交付前快速过一遍这个清单：

```
□ 标题是否在15-22字以内？
□ 前3段是否有钩子？
□ 全文是否只有一个核心观点？
□ 所有数据是否注明来源？
□ 百分比是否经过反算验证？
□ 是否有段落超过150字？
□ 是否有句子超过70字？
□ 每节是否有点睛句（加粗独立段）？
□ 加粗是否每节≤3处？
□ 是否有三级标题？
□ 中英文之间是否有空格？
□ 标点符号是否统一为中文？
□ 破折号是否用——？
□ 是否运行了自动检查脚本？
□ 结尾是否有余味（不是简单总结）？
□ 文末是否无署名行？
```
